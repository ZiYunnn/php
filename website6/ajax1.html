<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>Ajax 1 - 请求纯文本数据</title>
</head>
<body>
	<button id="button">请求纯文本</button>
	<br>
	<div id="text"></div>
</body>
<script>
	// 监听button对象
	document.getElementById('button').addEventListener('click',loadText);

	// 实现loadText方法
	function loadText(){
		// Asynchronous JavaScript and XML  异步更新  ajax是一门技术
		// XMLHttpRequest对象

		// 1.实例化xhr对象
		var xhr = new XMLHttpRequest();
		console.log(xhr.readyState);
		// console.log(xhr);

		// 2.配置对象信息(type, url/file, asyn(是否采用异步))
		// false的话代表同步
		xhr.open("get","sample.txt",true);
		console.log(xhr.readyState);

		// 3.执行处理数据的方法
		// xhr.onload = function(){
		// 	console.log(xhr.readyState); //4
		// 	console.log(this.responseText);
		// }
		// xhr.onreadystatechange = function(){
		// 	console.log(xhr.readyState); //2 3 4
		// 	console.log(this.responseText);
		// }

		// 可以做一个用户引导页面
		xhr.onprogress = function(){
			console.log("加载页面"+this.readyState);
		}

		// xhr.onload = function(){
		// 	console.log(xhr.readyState); //4
		// 	if(this.status == 200){
		// 		console.log(this.responseText);
		// 	}
		// }
		 xhr.onreadystatechange = function(){
			console.log(xhr.readyState); //2 3 4
			if(this.readyState == 4 && this.status == 200){
				// console.log(this.responseText);
				document.getElementById('text').innerHTML = this.responseText;
			}
			
		}

		// 4.发送请求
		xhr.send();

		// console.log(123);
	}
	// onresdyState的五个状态码：
	// 0: 请求未初始化
	// 1: 服务器连接已建立
	// 2: 请求已接收
	// 3: 请求处理中
	// 4: 请求已完成，且响应已就绪

	// 网络状态码：
	// 200: ok
	// 404: 页面未找到
</script>
</html>